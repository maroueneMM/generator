#!/bin/bash


DIR="${HOME}/generator"
USER_SCRIPT=$USER

# Fonctions ###########################################################

help_list() {
  echo "Usage:

  ${0##*/} [-h][--Build]

Options:

  -h, --help
    can I help you ?


  -b, --Build [ID if you want]
    run Build 

  --Publisch [Build Publish]
		Publish Module und Sub Projekte and datas
  "
}




Build() {


echo "************************************************************run Build*********************************************************************"
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "************************************************assemble Module und Sub Projekte**********************************************************"

./gradlew clean assemble --info --stacktrace

echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "***********************************************end assemble Module und Sub Projekte*******************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "************************************************test Module und Sub Projekte**************************************************************"

./gradlew test --info --stacktrace
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "***********************************************end test Module und Sub Projekte***********************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "*******************************************dependency check Module und Sub Projekte*******************************************************"


./gradlew dependencyCheckAnalyze --info --stacktrace

echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "******************************************end dependency check Module und Sub Projekte*****************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "******************************************************************************************************************************************"
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "*********************************************source  check Module und Sub Projekte********************************************************"

./gradlew spotlessCheck checkstyleMain checkstyleTest pmdMain pmdTest cpdCheck spotbugsMain spotbugsTest --info --stacktrace

echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "                                                                                                                                          "
echo "******************************************end source check Module und Sub Projekte*****************************************************"

}

Publisch(){
echo "Da Publish ausführen"
cd tttt
if [ $? -eq 0 ]; then
    echo OK
else
    echo FAIL
fi
}

## Execute ########################################################


optspec=":hvb-:"
while getopts "$optspec" optchar; do
    case "${optchar}" in
        -)
            case "${OPTARG}" in
                Build)
                    arg="${!OPTIND}"; OPTIND=$(( $OPTIND + 1 ))
                    Build "$arg"
                    ;;
								Publisch)
                    arg="${!OPTIND}"; OPTIND=$(( $OPTIND + 1 ))
                    Publisch "$arg"
                    ;;
							
        				*)		echo "Erreur reportez-vous à l'aide"
											help_list ;;
            		esac;;
				i)	ip ;;
				b)	Build ;;
        h)	help_list ;;
        *)	echo "Erreur reportez-vous à l'aide"
						help_list ;;
    esac
done

